<div class="product-page-container">
  <div class="main-layout-row">
    <!-- Sidebar (left, full height) -->
    <aside class="sidebar custom-sidebar collapsible-sidebar" [class.collapsed]="sidebarCollapsed">
      <button class="sidebar-toggle" (click)="toggleSidebar()" type="button">
        <i class="bi" [class.bi-chevron-left]="!sidebarCollapsed" [class.bi-chevron-right]="sidebarCollapsed"></i>
      </button>
      <div class="sidebar-header" *ngIf="!sidebarCollapsed">
        <h3>Filtres</h3>
      </div>
      
      <ul>
        <li>
          <button>
            <i class="bi bi-phone"></i> 
            <span *ngIf="!sidebarCollapsed">Téléphone & Tablette</span>
          </button>
        </li>
        <li>
          <button>
            <i class="bi bi-tv"></i> 
            <span *ngIf="!sidebarCollapsed">TV & HIGH TECH</span>
          </button>
        </li>
        <li>
          <button>
            <i class="bi bi-laptop"></i> 
            <span *ngIf="!sidebarCollapsed">Informatique</span>
          </button>
        </li>
        <li>
          <button>
            <i class="bi bi-house-door"></i> 
            <span *ngIf="!sidebarCollapsed">Maison, cuisine & bureau</span>
          </button>
        </li>
        <li>
          <button>
            <i class="bi bi-lightning"></i> 
            <span *ngIf="!sidebarCollapsed">Électroménager</span>
          </button>
        </li>
        <li>
          <button>
            <i class="bi bi-bag"></i> 
            <span *ngIf="!sidebarCollapsed">Vêtements & Chaussures</span>
          </button>
        </li>
        <li>
          <button>
            <i class="bi bi-heart"></i> 
            <span *ngIf="!sidebarCollapsed">Beauté & Santé</span>
          </button>
        </li>
        <li>
          <button>
            <i class="bi bi-controller"></i> 
            <span *ngIf="!sidebarCollapsed">Jeux vidéos & Consoles</span>
          </button>
        </li>
        <li>
          <button>
            <i class="bi bi-shop"></i> 
            <span *ngIf="!sidebarCollapsed">Supermarché</span>
          </button>
        </li>
        <li>
          <button>
            <i class="bi bi-bicycle"></i> 
            <span *ngIf="!sidebarCollapsed">Sports & Loisirs</span>
          </button>
        </li>
        <li>
          <button>
            <i class="bi bi-baby"></i> 
            <span *ngIf="!sidebarCollapsed">Bébé & Jouets</span>
          </button>
        </li>
        <li>
          <button>
            <i class="bi bi-three-dots"></i> 
            <span *ngIf="!sidebarCollapsed">Autres catégories</span>
          </button>
        </li>
      </ul>
    </aside>

    <!-- Main content (right) -->
    <div class="main-content">
      <!-- Header Section -->
      <section class="page-header">
        <div class="header-content">
          <h1><i class="bi bi-grid-3x3-gap"></i> Catalogue Produits</h1>
          <p>Explorez notre collection complète de produits</p>
        </div>
      </section>

     

      <!-- Products Section -->
      <section class="products-section">
        <div class="section-header">
          <h2><i class="bi bi-grid-3x3-gap"></i> Produits Populaires</h2>
          <div class="search-container">
            <input 
              type="text" 
              class="product-search" 
              placeholder="Rechercher un produit..."
              [(ngModel)]="searchTerm"
              (input)="onSearchChange($event)"/>
            <i class="bi bi-search search-icon"></i>
          </div>
        </div>
        <div class="products-grid">
          <div class="product-item" *ngFor="let product of products; let i = index">
            <div class="product-img-container">
              <img 
                [src]="product.image?.imageUrl || 'assets/images/default-product.jpg'" 
                [alt]="product.nom" 
                class="product-img-circular"/>
            </div>
            <div class="product-name">{{ product.nom }}</div>
            
            <div class="product-actions">
              <button class="btn btn-primary" (click)="addToCart(product)" title="Ajouter au panier">
                <i class="bi bi-cart-plus"></i>
              </button>
              <button class="btn btn-outline" (click)="viewDetails(product)" title="Voir les détails">
                <i class="bi bi-eye"></i>
              </button>
            </div>
          </div>
        </div>
      </section>

      <!-- Pagination Section -->
      <section class="pagination-section" *ngIf="totalPages > 1">
        <nav aria-label="Navigation des pages">
          <ul class="pagination">
            <li class="page-item">
              <button class="page-link" (click)="goToPage(currentPage - 1)">
                <i class="bi bi-chevron-left"></i>
              </button>
            </li>
            <li class="page-item" *ngFor="let page of getPageNumbers()" [class.active]="page === currentPage">
              <button class="page-link" (click)="goToPage(page)">{{ page + 1 }}</button>
            </li>
            <li class="page-item">
              <button class="page-link" (click)="goToPage(currentPage + 1)">
                <i class="bi bi-chevron-right"></i>
              </button>
            </li>
          </ul>
        </nav>
      </section>
    </div>
  </div>
</div>

<!-- Product Detail Modal -->
<div class="product-detail-overlay" *ngIf="showProductDetail" (click)="closeProductDetail()">
  <div class="product-detail-container" (click)="$event.stopPropagation()">
    <div class="product-detail-header">
      <h2><i class="bi bi-info-circle"></i> Détails du Produit</h2>
      <button class="close-detail-btn" (click)="closeProductDetail()">
        <i class="bi bi-x-lg"></i>
      </button>
    </div>
    
    <div class="product-detail-content" *ngIf="selectedProduct">
      <div class="product-detail-main">
        <div class="product-detail-image">
          <img [src]="selectedProduct.image?.imageUrl || 'assets/images/default-product.jpg'" 
               [alt]="selectedProduct.nom" 
               class="detail-product-img">
        </div>
        
        <div class="product-detail-info">
          <h3 class="product-title">{{ selectedProduct.nom }}</h3>
          
          
          
          <!-- Colors Section -->
          <div class="product-colors" *ngIf="selectedProduct.colors && selectedProduct.colors.length > 0">
            <h4>Couleurs disponibles</h4>
            <div class="colors-grid">
              <div *ngFor="let color of selectedProduct.colors" 
                   class="color-item"
                   [class.selected]="selectedColorId === color.id"
                   (click)="color.id && selectColor(color.id)">
                <div class="color-circle" 
                     [style.background-color]="color.colorCode">
                </div>
                <span class="color-name">{{ color.colorName }}</span>
              </div>
            </div>
          </div>
          
          <!-- Sizes Section -->
          <div class="product-sizes" *ngIf="selectedProduct.sizes && selectedProduct.sizes.length > 0">
            <h4>Tailles disponibles</h4>
            <div class="sizes-grid">
              <button *ngFor="let size of selectedProduct.sizes"
                      class="size-item"
                      [class.selected]="selectedSizeId === size.id"
                      (click)="size.id && selectSize(size.id)">
                {{ size.sizeName }}
              </button>
            </div>
          </div>
          
          <div class="product-description">
            <h4>Description</h4>
            <p>Découvrez ce produit de qualité premium dans notre catalogue.</p>
          </div>
          
          <div class="product-features">
            <h4>Caractéristiques</h4>
            <ul>
              <li>Produit de haute qualité</li>
              <li>Livraison rapide disponible</li>
              <li>Garantie constructeur</li>
              <li>Service client 7j/7</li>
            </ul>
          </div>
        </div>
      </div>
      
      <div class="product-detail-actions">
        <button class="btn btn-outline-detail" (click)="closeProductDetail()">
          <i class="bi bi-arrow-left"></i>
          Retour
        </button>
        <button class="btn btn-primary-detail" (click)="addToCart(selectedProduct)">
          <i class="bi bi-cart-plus"></i>
        </button>
      </div>
    </div>
  </div>
</div>
