<div class=" class container p-5">
  <div class="row mb-3">
    <div class="col-md-4 offset-md-8 d-flex justify-content-end">
      <input 
        type="text" 
        class="form-control w-auto" 
        placeholder="Rechercher un produit..." 
        [(ngModel)]="searchTerm"
        (ngModelChange)="onSearchChange($event)"/>
    </div>
  </div>
  <table class="table">
  <thead>
    <tr>
      <th>Image</th>
      <th>Nom</th>
      <th>Prix</th>
      <th>Stock</th>
      <th>Tailles</th>
      <th>Catégorie</th>
      <th>Status</th>
      <th>Date création</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
   <tr *ngFor="let product of filteredProducts">
    <td>
      <img [src]="getFirstImage(product)" 
            alt="{{ product.nom }}" 
            class="img-thumbnail" 
            style="width: 60px; height: 60px; object-fit: cover;">
    </td>
    <td>{{ product.nom }}</td>
    <td>{{ product.prix | currency:'MAD ' }}</td>
    <td>{{ product.stock }}</td>
    <td>{{ getSizes(product) }}</td>
    <td>{{ getCategorieName(product) }}</td>
    <td>
      <div class="form-check form-switch">
        <input 
          class="form-check-input" 
          type="checkbox" 
          id="'flexSwitchCheckChecked-' + i"
          [checked]="isProductActive(product)"
          (change)="toggleProductStatus(getProductId(product))"
          role="switch">
      </div>
    </td>
    <td>{{ getDateCreated(product) | date:'short' }}</td>
    <td>
      <button class="btn btn-sm btn-warning me-2" title="Modifier">
        <i class="bi bi-pencil"></i>
      </button>
      <button class="btn btn-sm btn-danger me-2" 
              (click)="deleteProduct(getProductId(product))" 
              title="Supprimer">
        <i class="bi bi-trash"></i>
      </button>
      <button class="btn btn-sm btn-primary" 
              (click)="deactivateProduct(getProductId(product))" 
              title="Désactiver">
        <i class="bi bi-door-open"></i>
      </button>
    </td>
  </tr>
  </tbody>
</table>

<!--<div class="row mt-3">
    <div class="col-md-6">
      <p class="text-muted">
        Affichage de {{ (currentPage - 1) * pageSize + 1 }} à 
        {{ currentPage * pageSize > totalItems ? totalItems : currentPage * pageSize }} 
        sur {{ totalItems }} produits
      </p>
    </div>
    <div class="col-md-6">
      <nav aria-label="Page navigation">
        <ul class="pagination justify-content-end">
          <li class="page-item" [class.disabled]="currentPage === 1">
            <a class="page-link" (click)="previousPage()" style="cursor: pointer;" tabindex="-1">
              Previous
            </a>
          </li>
          <li class="page-item" 
              *ngFor="let page of getPageNumbers()"
              [class.active]="page === currentPage">
            <a class="page-link" (click)="goToPage(page)" style="cursor: pointer;">
              {{ page }}
            </a>
          </li>
          <li class="page-item" [class.disabled]="currentPage === totalPages">
            <a class="page-link" (click)="nextPage()" style="cursor: pointer;">
              Next
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </div>-->

</div>